<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stephen Barrie">
<meta name="dcterms.date" content="2023-05-22">

<title>Into the Unknown - parkrun Kraków 20/05/2023 | #461</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Into the Unknown</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">Stephen Barrie</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Stephen137"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/sjbarrie"><i class="bi bi-linkedin" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">parkrun Kraków 20/05/2023 | #461</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">pandas</div>
                <div class="quarto-category">seaborn</div>
                <div class="quarto-category">Data Cleansing</div>
                <div class="quarto-category">parkrun</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Stephen Barrie </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 22, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#parkrun-kraków-20052023-461" id="toc-parkrun-kraków-20052023-461" class="nav-link active" data-scroll-target="#parkrun-kraków-20052023-461">parkrun Kraków 20/05/2023 | #461</a>
  <ul class="collapse">
  <li><a href="#overview-motivation" id="toc-overview-motivation" class="nav-link" data-scroll-target="#overview-motivation">Overview | Motivation</a>
  <ul class="collapse">
  <li><a href="#results-summary" id="toc-results-summary" class="nav-link" data-scroll-target="#results-summary">Results summary</a></li>
  <li><a href="#thoughts" id="toc-thoughts" class="nav-link" data-scroll-target="#thoughts">Thoughts</a></li>
  <li><a href="#data-source" id="toc-data-source" class="nav-link" data-scroll-target="#data-source">Data source</a></li>
  <li><a href="#import-the-required-packages" id="toc-import-the-required-packages" class="nav-link" data-scroll-target="#import-the-required-packages">Import the required packages</a></li>
  <li><a href="#load-in-the-data" id="toc-load-in-the-data" class="nav-link" data-scroll-target="#load-in-the-data">Load in the data</a></li>
  <li><a href="#exploratory-data-analysis-cleansing" id="toc-exploratory-data-analysis-cleansing" class="nav-link" data-scroll-target="#exploratory-data-analysis-cleansing">Exploratory Data Analysis | Cleansing</a></li>
  <li><a href="#nan-values" id="toc-nan-values" class="nav-link" data-scroll-target="#nan-values">NaN values</a></li>
  <li><a href="#datatypes" id="toc-datatypes" class="nav-link" data-scroll-target="#datatypes">Datatypes</a></li>
  <li><a href="#time" id="toc-time" class="nav-link" data-scroll-target="#time">Time</a></li>
  <li><a href="#categorical-variables" id="toc-categorical-variables" class="nav-link" data-scroll-target="#categorical-variables">Categorical variables</a></li>
  <li><a href="#cosmetic-changes" id="toc-cosmetic-changes" class="nav-link" data-scroll-target="#cosmetic-changes">Cosmetic changes</a></li>
  <li><a href="#key-headline-figures" id="toc-key-headline-figures" class="nav-link" data-scroll-target="#key-headline-figures">Key headline figures</a></li>
  <li><a href="#visualizations" id="toc-visualizations" class="nav-link" data-scroll-target="#visualizations">Visualizations</a></li>
  <li><a href="#number-of-runners" id="toc-number-of-runners" class="nav-link" data-scroll-target="#number-of-runners">Number of runners</a></li>
  <li><a href="#median-race-times" id="toc-median-race-times" class="nav-link" data-scroll-target="#median-race-times">Median race times</a></li>
  <li><a href="#scatterplot-of-all-race-times-across-age-groupings-and-by-sex" id="toc-scatterplot-of-all-race-times-across-age-groupings-and-by-sex" class="nav-link" data-scroll-target="#scatterplot-of-all-race-times-across-age-groupings-and-by-sex">Scatterplot of all race times across age groupings and by sex</a></li>
  <li><a href="#boxplots-of-race-times-across-age-groupings-and-by-sex" id="toc-boxplots-of-race-times-across-age-groupings-and-by-sex" class="nav-link" data-scroll-target="#boxplots-of-race-times-across-age-groupings-and-by-sex">Boxplots of race times across age groupings and by sex</a></li>
  <li><a href="#fastest-race-times-across-age-groupings" id="toc-fastest-race-times-across-age-groupings" class="nav-link" data-scroll-target="#fastest-race-times-across-age-groupings">Fastest race times across age groupings</a></li>
  <li><a href="#workings" id="toc-workings" class="nav-link" data-scroll-target="#workings">Workings</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="parkrun-kraków-20052023-461" class="level1">
<h1>parkrun Kraków 20/05/2023 | #461</h1>
<section id="overview-motivation" class="level2">
<h2 class="anchored" data-anchor-id="overview-motivation">Overview | Motivation</h2>
<p>A couple of weeks ago I signed up for <a href="'https://www.parkrun.pl/krakow'">parkrun Kraków</a>. I had a dry run on 6 May, just to see how it all worked. There was a bit of a mix up with the scanning and my ‘official’ time was a bit artificial, but on Saturday I took part in my first proper parkrun.</p>
<p>It turns out it was the 10 year anniversary of the event in Kraków, and there was a great atmosphere, and quite a few more runners than on my dry run!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Parkrun_files/figure-html/9653929b-1388-49fc-bf41-8726abd6ea53.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">happy_birthday.jpg</figcaption><p></p>
</figure>
</div>
<p>After the race I thought it would be fun to do a bit of a data dive on this race. My aim was to gain an insight into the distribution of competitors across age and sex, and I was particularly interested in discovering whether being affiliated with a running club results in a faster race time (as you might expect) compared to unattached runners like me.</p>
<section id="results-summary" class="level3">
<h3 class="anchored" data-anchor-id="results-summary">Results summary</h3>
<div class="cell" data-execution_count="330">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Number of runners: </span><span class="sc">{</span>number_of_runners<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'My race time (mins): </span><span class="sc">{</span>my_race_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest race time for my sex and age group (mins):</span><span class="sc">{</span>fastest_time_my_sex_age_group<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median race time for my sex and age group (mins): </span><span class="sc">{</span>median_time_my_sex_age_group<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest race time (mins): </span><span class="sc">{</span>fastest_race_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median race time (mins): </span><span class="sc">{</span>median_race_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest male race time (mins): </span><span class="sc">{</span>fastest_male<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median male race time (mins): </span><span class="sc">{</span>median_male_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest female race time (mins): </span><span class="sc">{</span>fastest_female<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median female race time (mins): </span><span class="sc">{</span>median_female_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest affiliated race time (mins): </span><span class="sc">{</span>fastest_club<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median affiliated race time (mins): </span><span class="sc">{</span>median_club<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest non-affiliated race time (mins): </span><span class="sc">{</span>fastest_unattached<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median non-affiliated race time (mins): </span><span class="sc">{</span>median_unattached<span class="sc">:.2f}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of runners: 333
My race time (mins): 24.95
Fastest race time for my sex and age group (mins):20.63
Median race time for my sex and age group (mins): 26.43
Fastest race time (mins): 16.48
Median race time (mins): 27.08
Fastest male race time (mins): 16.48
Median male race time (mins): 24.83
Fastest female race time (mins): 19.28
Median female race time (mins): 29.30
Fastest affiliated race time (mins): 17.55
Median affiliated race time (mins): 26.20
Fastest non-affiliated race time (mins): 16.48
Median non-affiliated race time (mins): 27.66</code></pre>
</div>
</div>
</section>
<section id="thoughts" class="level3">
<h3 class="anchored" data-anchor-id="thoughts">Thoughts</h3>
<div class="cell" data-execution_count="334">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Overall, I was quite pleased with my time. I had a target of 25 mins in mind which I beat - by 3 seconds! and I did beat the median time for my age and sex. As you might expect, runners who are attached to an officially running club generally outperform those that are not. Attached runners median race time was </span><span class="sc">{</span>median_club<span class="sc">}</span><span class="ss"> mins, as against </span><span class="sc">{</span>median_unattached<span class="sc">}</span><span class="ss"> mins for amateur runners like myself. On the day however it was an unattached runner who was first over the line with a winning time of </span><span class="sc">{</span>fastest_race_time<span class="sc">}</span><span class="ss"> mins.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Overall, I was quite pleased with my time. I had a target of 25 mins in mind which I beat - by 3 seconds! and I did beat the median time for my age and sex. As you might expect, runners who are attached to an officially running club generally outperform those that are not. Attached runners median race time was 26.2 mins, as against 27.66 mins for amateur runners like myself. On the day however it was an unattached runner who was first over the line with a winning time of 16.48 mins.</code></pre>
</div>
</div>
</section>
<section id="data-source" class="level3">
<h3 class="anchored" data-anchor-id="data-source">Data source</h3>
<p>The results are published each week on the <a href="https://www.parkrun.pl/krakow/results/latestresults/">official website</a>. I could not find an API and so I just copied and pasted form the table into a csv file for cleansing using <a href="https://pandas.pydata.org/">pandas</a>, and visualisation using <a href="https://seaborn.pydata.org/">Seaborn</a>.</p>
<p>It turns out that there was a lot more cleaning required than I first thought! Often the case with smaller datasets.</p>
</section>
<section id="import-the-required-packages" class="level3">
<h3 class="anchored" data-anchor-id="import-the-required-packages">Import the required packages</h3>
<div class="cell" data-execution_count="173">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-in-the-data" class="level3">
<h3 class="anchored" data-anchor-id="load-in-the-data">Load in the data</h3>
<div class="cell" data-execution_count="186">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23 <span class="op">=</span> pd.read_csv(<span class="st">'results_20_05_2023.csv'</span>, encoding<span class="op">=</span><span class="st">'latin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploratory-data-analysis-cleansing" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-data-analysis-cleansing">Exploratory Data Analysis | Cleansing</h3>
<div class="cell" data-execution_count="187">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop name column for anonymity</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23 <span class="op">=</span> parkrun_krakow_20_05_23.drop(<span class="st">'UCZESTNIK'</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># preview our data</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="187">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>POZYCJA</th>
      <th>P?E?</th>
      <th>KATEGORIA WIEKOWA</th>
      <th>KLUB</th>
      <th>CZAS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>M??czyzna</td>
      <td>VM35-39</td>
      <td>NaN</td>
      <td>16:29</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>M??czyzna</td>
      <td>VM40-44</td>
      <td>#AdamCzerwi?skiTeam</td>
      <td>17:33</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>M??czyzna</td>
      <td>VM35-39</td>
      <td>ITMBW Kraków</td>
      <td>17:56</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>M??czyzna</td>
      <td>VM35-39</td>
      <td>Wawel Kraków</td>
      <td>18:07</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>350</th>
      <td>351</td>
      <td>M??czyzna</td>
      <td>VM45-49</td>
      <td>NaN</td>
      <td>51:30:00</td>
    </tr>
    <tr>
      <th>351</th>
      <td>352</td>
      <td>M??czyzna</td>
      <td>VM90-94</td>
      <td>NaN</td>
      <td>54:54:00</td>
    </tr>
    <tr>
      <th>352</th>
      <td>353</td>
      <td>Kobieta</td>
      <td>VW60-64</td>
      <td>Biegam bo lubie Gdynia</td>
      <td>54:55:00</td>
    </tr>
    <tr>
      <th>353</th>
      <td>354</td>
      <td>Kobieta</td>
      <td>VW50-54</td>
      <td>#YOLOTEAMKRK</td>
      <td>54:55:00</td>
    </tr>
    <tr>
      <th>354</th>
      <td>355</td>
      <td>M??czyzna</td>
      <td>VM75-79</td>
      <td>NaN</td>
      <td>54:55:00</td>
    </tr>
  </tbody>
</table>
<p>355 rows × 5 columns</p>
</div>
</div>
</div>
<p>Let’s rename the columns, which are in Polish at the moment. We can see that we also have some problems with Polish letters not being recognised. We’ll deal with this also.</p>
<div class="cell" data-execution_count="188">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23 <span class="op">=</span> parkrun_krakow_20_05_23.rename(columns<span class="op">=</span>{<span class="st">'POZYCJA'</span>: <span class="st">'Position'</span>, <span class="st">''</span>: <span class="st">'Name'</span>, <span class="st">'P?E?'</span>: <span class="st">'Sex'</span>,<span class="st">'KATEGORIA WIEKOWA'</span>: <span class="st">'Age_Group'</span>,<span class="st">'KLUB'</span>: <span class="st">'Club_Runner?'</span>, <span class="st">'CZAS'</span>: <span class="st">'Time'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="189">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 355 entries, 0 to 354
Data columns (total 5 columns):
 #   Column        Non-Null Count  Dtype 
---  ------        --------------  ----- 
 0   Position      355 non-null    int64 
 1   Sex           333 non-null    object
 2   Age_Group     333 non-null    object
 3   Club_Runner?  115 non-null    object
 4   Time          333 non-null    object
dtypes: int64(1), object(4)
memory usage: 14.0+ KB</code></pre>
</div>
</div>
<p>We can see that although there are 355 observations for ‘Position’, we only have 333 observations for ‘Time’. It often happens that runners participate who have not officially signed up and so although their position is logged, no further details are available.</p>
</section>
<section id="nan-values" class="level3">
<h3 class="anchored" data-anchor-id="nan-values">NaN values</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Parkrun_files/figure-html/14e569cd-a522-42a3-b421-0dd38b179101.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">NAN.jpg</figcaption><p></p>
</figure>
</div>
<div class="cell" data-execution_count="190">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.isna().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="190">
<pre><code>Position          0
Sex              22
Age_Group        22
Club_Runner?    240
Time             22
dtype: int64</code></pre>
</div>
</div>
<p>As anticipated we have 22 <code>NaN</code> values for <code>Sex</code>, <code>Age_Group</code> and <code>Time</code>. So let’s remove all observations where no race time was recorded :</p>
<div class="cell" data-execution_count="193">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23 <span class="op">=</span> parkrun_krakow_20_05_23.dropna(subset<span class="op">=</span>[<span class="st">'Time'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And check our NaNs again :</p>
<div class="cell" data-execution_count="194">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.isna().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="194">
<pre><code>Position          0
Sex               0
Age_Group         0
Club_Runner?    218
Time              0
dtype: int64</code></pre>
</div>
</div>
<p>We still have to deal with the <code>Club_Runner</code> discrepancies. A value is only included if a runner is affiliated to a running club. Non-affiliated runners are treated as <code>NaN</code>. Let’s replace non-affiliated with <code>No</code> and affiliated with <code>Yes</code> :</p>
<div class="cell" data-execution_count="195">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace values based on conditions</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23[<span class="st">'Club_Runner?'</span>].fillna(<span class="st">'No'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23[<span class="st">'Club_Runner?'</span>] <span class="op">=</span> np.where(parkrun_krakow_20_05_23[<span class="st">'Club_Runner?'</span>] <span class="op">!=</span> <span class="st">'No'</span>, <span class="st">'Yes'</span>, <span class="st">'No'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="196">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.isna().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="196">
<pre><code>Position        0
Sex             0
Age_Group       0
Club_Runner?    0
Time            0
dtype: int64</code></pre>
</div>
</div>
<p>Excellent. We have cleaned up all <code>NaN</code> values. Let’s have a look at our datatypes :</p>
</section>
<section id="datatypes" class="level3">
<h3 class="anchored" data-anchor-id="datatypes">Datatypes</h3>
<div class="cell" data-execution_count="203">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="203">
<pre><code>Position         int64
Sex             object
Age_Group       object
Club_Runner?    object
Time            object
dtype: object</code></pre>
</div>
</div>
<p>We have a problem here. Our race times are an ‘object’. We will need to convert this. Let’s create a new column <code>Time_mins</code> :</p>
</section>
<section id="time" class="level3">
<h3 class="anchored" data-anchor-id="time">Time</h3>
<div class="cell" data-execution_count="204">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the string into minutes and seconds components</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>time_components <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Time'</span>].<span class="bu">str</span>.split(<span class="st">':'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the minutes and seconds components to integers</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>minutes <span class="op">=</span> time_components.<span class="bu">str</span>[<span class="dv">0</span>].astype(<span class="bu">int</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>seconds <span class="op">=</span> time_components.<span class="bu">str</span>[<span class="dv">1</span>].astype(<span class="bu">int</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the decimal representation of minutes</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>] <span class="op">=</span> minutes <span class="op">+</span> seconds <span class="op">/</span> <span class="fl">60.0</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Round the "minutes" column to 2 decimal places</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>] <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>].<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Output the result</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0      16.48
1      17.55
3      17.93
4      18.12
5      18.35
       ...  
350    51.50
351    54.90
352    54.92
353    54.92
354    54.92
Name: Time_mins, Length: 333, dtype: float64</code></pre>
</div>
</div>
<p>We now have race times as <code>float</code> that is in minutes (rounded to 2 decimal places).</p>
</section>
<section id="categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="categorical-variables">Categorical variables</h3>
<div class="cell" data-execution_count="206">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="206">
<pre><code>Position        333
Sex               2
Age_Group        29
Club_Runner?      2
Time            311
Time_mins       311
dtype: int64</code></pre>
</div>
</div>
<p>Ok, so we have :</p>
<ul>
<li>311 unique times, so quite a few crossing the line together</li>
<li>2 different sexes - M (Male) and F (Female)</li>
<li>29 different age groups</li>
<li>2 distinct values for Club_Runner - Yes or No - as defined earlier</li>
</ul>
<div class="cell" data-execution_count="207">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 333 entries, 0 to 354
Data columns (total 6 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   Position      333 non-null    int64  
 1   Sex           333 non-null    object 
 2   Age_Group     333 non-null    object 
 3   Club_Runner?  333 non-null    object 
 4   Time          333 non-null    object 
 5   Time_mins     333 non-null    float64
dtypes: float64(1), int64(1), object(4)
memory usage: 18.2+ KB</code></pre>
</div>
</div>
</section>
<section id="cosmetic-changes" class="level3">
<h3 class="anchored" data-anchor-id="cosmetic-changes">Cosmetic changes</h3>
<p>Let’s do some general tidy up. We can use string slicing to remove leading characters in the <code>Age_Group</code> column :</p>
<div class="cell" data-execution_count="208">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the first two characters from the strings in the "Age_Group" column</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23[<span class="st">'Age_Group'</span>]<span class="op">=</span>parkrun_krakow_20_05_23[<span class="st">'Age_Group'</span>].<span class="bu">str</span>[<span class="dv">2</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s also tidy up the narrative in the <code>Sex</code> column, by replacing <code>Mezczyzna</code> with <code>M</code> and <code>Kobieta</code> with <code>F</code> :</p>
<div class="cell" data-execution_count="210">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace strings starting with 'M' to 'M' in the "Sex" column</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.loc[parkrun_krakow_20_05_23[<span class="st">'Sex'</span>].<span class="bu">str</span>.startswith(<span class="st">'M'</span>), <span class="st">'Sex'</span>] <span class="op">=</span> <span class="st">'M'</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace strings starting with 'K' to 'F' in the "Sex" column</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23.loc[parkrun_krakow_20_05_23[<span class="st">'Sex'</span>].<span class="bu">str</span>.startswith(<span class="st">'K'</span>), <span class="st">'Sex'</span>] <span class="op">=</span> <span class="st">'F'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="211">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="211">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Position</th>
      <th>Sex</th>
      <th>Age_Group</th>
      <th>Club_Runner?</th>
      <th>Time</th>
      <th>Time_mins</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>M</td>
      <td>35-39</td>
      <td>No</td>
      <td>16:29</td>
      <td>16.48</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>M</td>
      <td>40-44</td>
      <td>Yes</td>
      <td>17:33</td>
      <td>17.55</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>M</td>
      <td>35-39</td>
      <td>Yes</td>
      <td>17:56</td>
      <td>17.93</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>M</td>
      <td>35-39</td>
      <td>Yes</td>
      <td>18:07</td>
      <td>18.12</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>M</td>
      <td>40-44</td>
      <td>Yes</td>
      <td>18:21</td>
      <td>18.35</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>350</th>
      <td>351</td>
      <td>M</td>
      <td>45-49</td>
      <td>No</td>
      <td>51:30:00</td>
      <td>51.50</td>
    </tr>
    <tr>
      <th>351</th>
      <td>352</td>
      <td>M</td>
      <td>90-94</td>
      <td>No</td>
      <td>54:54:00</td>
      <td>54.90</td>
    </tr>
    <tr>
      <th>352</th>
      <td>353</td>
      <td>F</td>
      <td>60-64</td>
      <td>Yes</td>
      <td>54:55:00</td>
      <td>54.92</td>
    </tr>
    <tr>
      <th>353</th>
      <td>354</td>
      <td>F</td>
      <td>50-54</td>
      <td>Yes</td>
      <td>54:55:00</td>
      <td>54.92</td>
    </tr>
    <tr>
      <th>354</th>
      <td>355</td>
      <td>M</td>
      <td>75-79</td>
      <td>No</td>
      <td>54:55:00</td>
      <td>54.92</td>
    </tr>
  </tbody>
</table>
<p>333 rows × 6 columns</p>
</div>
</div>
</div>
<p>Looking much tidier. Let’s now return to the <code>Age Groupings</code>. These are currently a categorical variable, but let’s simplify things by creating a new column <code>Age_Midpoint</code> that splits the string, converts to integer, and takes the mid-value of the range :</p>
<div class="cell" data-execution_count="216">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define conversion function</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_age_midpoint(age_group):</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'-'</span> <span class="kw">in</span> age_group:</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>        age_range <span class="op">=</span> age_group.split(<span class="st">'-'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        age_start <span class="op">=</span> <span class="bu">int</span>(age_range[<span class="dv">0</span>])</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        age_end <span class="op">=</span> <span class="bu">int</span>(age_range[<span class="dv">1</span>])</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>        age_midpoint <span class="op">=</span> (age_start <span class="op">+</span> age_end) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        age_midpoint <span class="op">=</span> <span class="bu">int</span>(age_group)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> age_midpoint    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="217">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the conversion function to the Age_Group column</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23[<span class="st">'Age_Midpoint'</span>] <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Age_Group'</span>].<span class="bu">apply</span>(get_age_midpoint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="218">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>parkrun_krakow_20_05_23</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="218">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Position</th>
      <th>Sex</th>
      <th>Age_Group</th>
      <th>Club_Runner?</th>
      <th>Time</th>
      <th>Time_mins</th>
      <th>Age_Midpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>M</td>
      <td>35-39</td>
      <td>No</td>
      <td>16:29</td>
      <td>16.48</td>
      <td>37</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>M</td>
      <td>40-44</td>
      <td>Yes</td>
      <td>17:33</td>
      <td>17.55</td>
      <td>42</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>M</td>
      <td>35-39</td>
      <td>Yes</td>
      <td>17:56</td>
      <td>17.93</td>
      <td>37</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>M</td>
      <td>35-39</td>
      <td>Yes</td>
      <td>18:07</td>
      <td>18.12</td>
      <td>37</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>M</td>
      <td>40-44</td>
      <td>Yes</td>
      <td>18:21</td>
      <td>18.35</td>
      <td>42</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>350</th>
      <td>351</td>
      <td>M</td>
      <td>45-49</td>
      <td>No</td>
      <td>51:30:00</td>
      <td>51.50</td>
      <td>47</td>
    </tr>
    <tr>
      <th>351</th>
      <td>352</td>
      <td>M</td>
      <td>90-94</td>
      <td>No</td>
      <td>54:54:00</td>
      <td>54.90</td>
      <td>92</td>
    </tr>
    <tr>
      <th>352</th>
      <td>353</td>
      <td>F</td>
      <td>60-64</td>
      <td>Yes</td>
      <td>54:55:00</td>
      <td>54.92</td>
      <td>62</td>
    </tr>
    <tr>
      <th>353</th>
      <td>354</td>
      <td>F</td>
      <td>50-54</td>
      <td>Yes</td>
      <td>54:55:00</td>
      <td>54.92</td>
      <td>52</td>
    </tr>
    <tr>
      <th>354</th>
      <td>355</td>
      <td>M</td>
      <td>75-79</td>
      <td>No</td>
      <td>54:55:00</td>
      <td>54.92</td>
      <td>77</td>
    </tr>
  </tbody>
</table>
<p>333 rows × 7 columns</p>
</div>
</div>
</div>
<p>Great, we now have our new column with a single integer value.</p>
</section>
<section id="key-headline-figures" class="level3">
<h3 class="anchored" data-anchor-id="key-headline-figures">Key headline figures</h3>
<div class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>number_of_runners <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Position'</span>].count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>fastest_race_time <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>average_race_time <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>median_race_time <span class="op">=</span> parkrun_krakow_20_05_23[<span class="st">'Time_mins'</span>].median()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I know that I finished in position 131, and so I can use <code>.loc</code> to access the my row index :</p>
<div class="cell" data-execution_count="165">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>row <span class="op">=</span> parkrun_krakow_20_05_23.loc[parkrun_krakow_20_05_23[<span class="st">'Position'</span>] <span class="op">==</span><span class="dv">131</span>]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>row</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="165">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Position</th>
      <th>Sex</th>
      <th>Age_Group</th>
      <th>Club_Runner?</th>
      <th>Time</th>
      <th>Time_mins</th>
      <th>Age_Midpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>130</th>
      <td>131</td>
      <td>M</td>
      <td>45-49</td>
      <td>No</td>
      <td>24:57:00</td>
      <td>24.95</td>
      <td>47</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>and then assign my race time to an appropriate variable :</p>
<div class="cell" data-execution_count="168">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>my_race_time <span class="op">=</span> parkrun_krakow_20_05_23.loc[<span class="dv">130</span>,<span class="st">'Time_mins'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="239">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Number of runners: </span><span class="sc">{</span>number_of_runners<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'My race time (mins): </span><span class="sc">{</span>my_race_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Fastest race time (mins): </span><span class="sc">{</span>fastest_race_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Median race time (mins): </span><span class="sc">{</span>median_race_time<span class="sc">:.2f}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of runners: 333
My race time (mins): 24.95
Fastest race time (mins): 16.48
Median race time (mins): 27.08</code></pre>
</div>
</div>
</section>
<section id="visualizations" class="level3">
<h3 class="anchored" data-anchor-id="visualizations">Visualizations</h3>
</section>
<section id="number-of-runners" class="level3">
<h3 class="anchored" data-anchor-id="number-of-runners">Number of runners</h3>
<div class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a count of number of males and females</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x <span class="op">=</span> <span class="st">'Sex'</span>,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>              data <span class="op">=</span> parkrun_krakow_20_05_23)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Sex'</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Number of runners'</span>)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add count values on top of each bar</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> ax.patches:</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> p.get_height()</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    ax.annotate(<span class="ss">f'</span><span class="sc">{</span><span class="bu">round</span>(count)<span class="sc">}</span><span class="ss">'</span>, (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, p.get_height()), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'center'</span>, xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">5</span>), textcoords<span class="op">=</span><span class="st">'offset points'</span>)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-31-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="235">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a count of number of runners in each Age Grouping</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x <span class="op">=</span> <span class="st">'Age_Midpoint'</span>,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>              data <span class="op">=</span> parkrun_krakow_20_05_23)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Mid point of age grouping'</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Number of runners'</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add rounded count values on top of each bar (rounded to 2 decimal places)</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> ax.patches:</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> p.get_height()</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    ax.annotate(<span class="ss">f'</span><span class="sc">{</span>count<span class="sc">:.0f}</span><span class="ss">'</span>, (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, p.get_height()), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'center'</span>, xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">5</span>), textcoords<span class="op">=</span><span class="st">'offset points'</span>)</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-32-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="233">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a count of number of males and females</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x <span class="op">=</span> <span class="st">'Club_Runner?'</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>              data <span class="op">=</span> parkrun_krakow_20_05_23)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Club runner?'</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Number of runners'</span>)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add count values on top of each bar</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> ax.patches:</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> p.get_height()</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    ax.annotate(<span class="ss">f'</span><span class="sc">{</span><span class="bu">round</span>(count)<span class="sc">}</span><span class="ss">'</span>, (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, p.get_height()), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'center'</span>, xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">5</span>), textcoords<span class="op">=</span><span class="st">'offset points'</span>)</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-33-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="median-race-times" class="level3">
<h3 class="anchored" data-anchor-id="median-race-times">Median race times</h3>
<div class="cell" data-execution_count="240">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a barplot showing median race time by sex</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>sns.barplot(x <span class="op">=</span> <span class="st">'Sex'</span>, </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="st">'Time_mins'</span>, </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> parkrun_krakow_20_05_23,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>           estimator <span class="op">=</span> np.median) </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Sex'</span>)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Median race time (mins)'</span>)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-34-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="241">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a barplot showing median race time by sex</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>sns.barplot(x <span class="op">=</span> <span class="st">'Sex'</span>, </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="st">'Time_mins'</span>, </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> parkrun_krakow_20_05_23,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>           estimator <span class="op">=</span> np.median) </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Sex'</span>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Median race time (mins)'</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-35-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="242">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a barplot showing median race time by running club membership</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>sns.barplot(x <span class="op">=</span> <span class="st">'Club_Runner?'</span>, </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="st">'Time_mins'</span>, </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> parkrun_krakow_20_05_23,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>           estimator <span class="op">=</span> np.median) </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Club runner?'</span>)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Median race time (mins)'</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-36-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="scatterplot-of-all-race-times-across-age-groupings-and-by-sex" class="level3">
<h3 class="anchored" data-anchor-id="scatterplot-of-all-race-times-across-age-groupings-and-by-sex">Scatterplot of all race times across age groupings and by sex</h3>
<div class="cell" data-execution_count="232">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the 'hue' argument to provide a factor variable</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x<span class="op">=</span><span class="st">"Age_Midpoint"</span>, y<span class="op">=</span><span class="st">"Time_mins"</span>, data<span class="op">=</span>parkrun_krakow_20_05_23, hue<span class="op">=</span><span class="st">'Sex'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Move the legend to an empty part of the plot</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'lower right'</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Mid point of age grouping'</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Race time (mins)'</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-37-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="boxplots-of-race-times-across-age-groupings-and-by-sex" class="level3">
<h3 class="anchored" data-anchor-id="boxplots-of-race-times-across-age-groupings-and-by-sex">Boxplots of race times across age groupings and by sex</h3>
<div class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create box plots of run time per age group</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use hue to allow comparison between male and female</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(x <span class="op">=</span> <span class="st">'Age_Midpoint'</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="st">'Time_mins'</span>, </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> parkrun_krakow_20_05_23, </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>            hue <span class="op">=</span> <span class="st">'Sex'</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Sometimes the labelling can get a bit cluttered. We can control this</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co"># loc=0 moves legend to the best position</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Mid point of age grouping'</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Race time (mins)'</span>)</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-38-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="fastest-race-times-across-age-groupings" class="level3">
<h3 class="anchored" data-anchor-id="fastest-race-times-across-age-groupings">Fastest race times across age groupings</h3>
<div class="cell" data-execution_count="238">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a barplot showing min race time</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>sns.barplot(x <span class="op">=</span> <span class="st">'Age_Midpoint'</span>, </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="st">'Time_mins'</span>, </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> parkrun_krakow_20_05_23,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>           estimator <span class="op">=</span> np.<span class="bu">min</span>)  </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>plt.title (<span class="st">'parkrun Kraków #461'</span>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel (<span class="st">'Mid point of age grouping'</span>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel (<span class="st">'Fastest race time (mins)'</span>)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Parkrun_files/figure-html/cell-39-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="workings" class="level3">
<h3 class="anchored" data-anchor-id="workings">Workings</h3>
<div class="cell" data-execution_count="270">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>group_by_sex <span class="op">=</span> parkrun_krakow_20_05_23.groupby([<span class="st">'Sex'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="271">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>group_by_sex[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="271">
<pre><code>Sex
F    19.28
M    16.48
Name: Time_mins, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="247">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>fastest_female <span class="op">=</span> group_by_sex[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()[<span class="dv">0</span>]</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>fastest_female</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="247">
<pre><code>19.28</code></pre>
</div>
</div>
<div class="cell" data-execution_count="248">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>fastest_male <span class="op">=</span> group_by_sex[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()[<span class="dv">1</span>]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>fastest_male</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="248">
<pre><code>16.48</code></pre>
</div>
</div>
<div class="cell" data-execution_count="221">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>group_by_sex[<span class="st">'Time_mins'</span>].median()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="221">
<pre><code>Sex
F    29.305
M    24.830
Name: Time_mins, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="250">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>median_female_time <span class="op">=</span> group_by_sex[<span class="st">'Time_mins'</span>].median()[<span class="dv">0</span>]</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>median_female_time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="250">
<pre><code>29.305</code></pre>
</div>
</div>
<div class="cell" data-execution_count="251">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>median_male_time <span class="op">=</span> group_by_sex[<span class="st">'Time_mins'</span>].median()[<span class="dv">1</span>]</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>median_male_time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="251">
<pre><code>24.83</code></pre>
</div>
</div>
<div class="cell" data-execution_count="277">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>group_by_club <span class="op">=</span> parkrun_krakow_20_05_23.groupby([<span class="st">'Club_Runner?'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="273">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>group_by_club[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="273">
<pre><code>Club_Runner?
No     16.48
Yes    17.55
Name: Time_mins, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="261">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>fastest_club <span class="op">=</span> group_by_club[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()[<span class="dv">1</span>]</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>fastest_club</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="261">
<pre><code>17.55</code></pre>
</div>
</div>
<div class="cell" data-execution_count="264">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>median_club <span class="op">=</span> group_by_club[<span class="st">'Time_mins'</span>].median()[<span class="dv">1</span>]</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>median_club</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="264">
<pre><code>26.2</code></pre>
</div>
</div>
<div class="cell" data-execution_count="267">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>fastest_unattached <span class="op">=</span> group_by_club[<span class="st">'Time_mins'</span>].<span class="bu">min</span>()[<span class="dv">0</span>]</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>fastest_unattached</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="267">
<pre><code>16.48</code></pre>
</div>
</div>
<div class="cell" data-execution_count="266">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>median_unattached <span class="op">=</span> group_by_club[<span class="st">'Time_mins'</span>].median()[<span class="dv">0</span>]</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>median_unattached</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="266">
<pre><code>27.66</code></pre>
</div>
</div>
<div class="cell" data-execution_count="328">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>fastest_time_my_sex_age_group <span class="op">=</span> parkrun_krakow_20_05_23[(parkrun_krakow_20_05_23[<span class="st">'Age_Midpoint'</span>] <span class="op">==</span> <span class="dv">47</span>) <span class="op">&amp;</span> (parkrun_krakow_20_05_23[<span class="st">'Sex'</span>] <span class="op">==</span> <span class="st">'M'</span>)][<span class="st">'Time_mins'</span>].<span class="bu">min</span>()</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>fastest_time_my_sex_age_group</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="328">
<pre><code>20.63</code></pre>
</div>
</div>
<div class="cell" data-execution_count="329">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>median_time_my_sex_age_group <span class="op">=</span> parkrun_krakow_20_05_23[(parkrun_krakow_20_05_23[<span class="st">'Age_Midpoint'</span>] <span class="op">==</span> <span class="dv">47</span>) <span class="op">&amp;</span> (parkrun_krakow_20_05_23[<span class="st">'Sex'</span>] <span class="op">==</span> <span class="st">'M'</span>)][<span class="st">'Time_mins'</span>].median()</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>median_time_my_sex_age_group </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="329">
<pre><code>26.43</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>