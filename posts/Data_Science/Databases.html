<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Into the Unknown - SQL</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Into the Unknown</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Stephen Barrie</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Stephen137" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/sjbarrie" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">SQL</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#creating-usage-funnels" id="toc-creating-usage-funnels" class="nav-link active" data-scroll-target="#creating-usage-funnels">Creating Usage Funnels</a></li>
  <li><a href="#user-churn" id="toc-user-churn" class="nav-link" data-scroll-target="#user-churn">User Churn</a></li>
  <li><a href="#determining-web-traffic-attribution" id="toc-determining-web-traffic-attribution" class="nav-link" data-scroll-target="#determining-web-traffic-attribution">Determining Web Traffic Attribution</a></li>
  <li><a href="#relational-database-management-system" id="toc-relational-database-management-system" class="nav-link" data-scroll-target="#relational-database-management-system">Relational Database Management System</a></li>
  <li><a href="#what-is-a-database" id="toc-what-is-a-database" class="nav-link" data-scroll-target="#what-is-a-database">What is a Database?</a></li>
  <li><a href="#what-is-a-relational-database" id="toc-what-is-a-relational-database" class="nav-link" data-scroll-target="#what-is-a-relational-database">What is a Relational Database?</a></li>
  <li><a href="#tables-rows-and-columns" id="toc-tables-rows-and-columns" class="nav-link" data-scroll-target="#tables-rows-and-columns">Tables: Rows and Columns</a></li>
  <li><a href="#what-is-a-relational-database-management-system-rdbms" id="toc-what-is-a-relational-database-management-system-rdbms" class="nav-link" data-scroll-target="#what-is-a-relational-database-management-system-rdbms">What is a Relational Database Management System (RDBMS)?</a></li>
  <li><a href="#what-is-sql" id="toc-what-is-sql" class="nav-link" data-scroll-target="#what-is-sql">What is SQL?</a>
  <ul class="collapse">
  <li><a href="#popular-relational-database-management-systems" id="toc-popular-relational-database-management-systems" class="nav-link" data-scroll-target="#popular-relational-database-management-systems">Popular Relational Database Management Systems</a></li>
  <li><a href="#using-an-rdbms-on-codecademy" id="toc-using-an-rdbms-on-codecademy" class="nav-link" data-scroll-target="#using-an-rdbms-on-codecademy">Using An RDBMS On Codecademy</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="creating-usage-funnels" class="level3">
<h3 class="anchored" data-anchor-id="creating-usage-funnels">Creating Usage Funnels</h3>
<p>Visitors to Codecademy’s website follow a simple workflow:</p>
<ol type="1">
<li>Browse items available for sale</li>
<li>Click an icon to begin the checkout process</li>
<li>Enter payment information to complete their purchase</li>
</ol>
<p>Not all users who browse on the website will find something that they like enough to checkout, and not all users who begin the checkout process will finish entering their payment information to make a purchase.</p>
<p>This type of multi-step process where some users leave at each step is called a <code>funnel</code>.</p>
<p>Catherine wants to determine what percent of users make it through each step of the funnel so that she can recommend improvements to Codecademy’s website. Catherine is going to combine data from three different tables:</p>
<p><code>browse</code> - gives the timestamps of users who visited different item description pages <code>checkout</code> - gives the timestamps of users who visited the checkout page <code>purchase</code> - gives the timestamps of when users complete their purchase</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Databases_files/figure-html/025fc860-3075-45a4-9cde-67290486b1ea-2-bb721973-4f06-4aad-97f3-8d5e9786bb12.JPG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">funnel_SQL.JPG</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Databases_files/figure-html/025fc860-3075-45a4-9cde-67290486b1ea-1-7ab05369-13e5-4938-8c15-e17b6bad09bf.JPG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">browse_checkout.JPG</figcaption>
</figure>
</div>
<p>Using SQL, she finds that 24% of all users who browse move on to checkout. 89% of those who reach checkout purchase.</p>
</section>
<section id="user-churn" class="level3">
<h3 class="anchored" data-anchor-id="user-churn">User Churn</h3>
</section>
<section id="determining-web-traffic-attribution" class="level3">
<h3 class="anchored" data-anchor-id="determining-web-traffic-attribution">Determining Web Traffic Attribution</h3>
<p>Catherine’s boss asks her to analyze how users are finding Codecademy’s websites using <code>UTM Parameters</code>. UTM Parameters are special tags that site owners add to their pages to track what website a user was on before they reach the website. For instance:</p>
<p>If a user found Codecademy’s website through Google search, the table page_visits might have utm_source set to ‘google’. If a different user clicked a Facebook ad to get to Codecademy’s website, then their row in page_visits might have utm_source as ‘facebook’.</p>
<p>Say we want to know how many visits come from each <code>utm_source</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Databases_files/figure-html/525aaf85-b64a-4bcf-99c7-140262d4b64c-1-a1bc1070-a589-43c4-aad4-da6b1f81c0ef.JPG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">web_traffic.JPG</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p>Q. What is the most common source of traffic to Codecademy’s website? A. nytimes</p>
</blockquote>
</section>
<section id="relational-database-management-system" class="level3">
<h3 class="anchored" data-anchor-id="relational-database-management-system">Relational Database Management System</h3>
</section>
<section id="what-is-a-database" class="level3">
<h3 class="anchored" data-anchor-id="what-is-a-database">What is a Database?</h3>
<p>A <em>database</em> is a set of data stored in a computer. This data is usually structured in a way that makes the data easily accessible.</p>
</section>
<section id="what-is-a-relational-database" class="level3">
<h3 class="anchored" data-anchor-id="what-is-a-relational-database">What is a Relational Database?</h3>
<p>A relational database is a type of database. It uses a structure that allows us to identify and access data in relation to another piece of data in the database. Often, data in a relational database is organized into tables.</p>
</section>
<section id="tables-rows-and-columns" class="level3">
<h3 class="anchored" data-anchor-id="tables-rows-and-columns">Tables: Rows and Columns</h3>
<p>Tables can have hundreds, thousands, sometimes even millions of rows of data. These rows are often called records.</p>
<p>Tables can also have many columns of data. Columns are labeled with a descriptive name (say, age for example) and have a specific data type.</p>
<p>For example, a column called age may have a type of INTEGER (denoting the type of data it is meant to hold).</p>
<p><img src="Databases_files/figure-html/ef36f332-5e6f-43da-abe7-db8efe67dd7c-1-3805ccb1-9a51-4080-8f13-226996cb93a5.JPG" class="img-fluid" alt="name_age_country.JPG"> In the table above, there are three columns (name, age, and country).</p>
<p>The name and country columns store string data types, whereas age stores integer data types. The set of columns and data types make up the schema of this table.</p>
<p>The table also has four rows, or records, in it (one each for Natalia, Ned, Zenas, and Laura).</p>
</section>
<section id="what-is-a-relational-database-management-system-rdbms" class="level3">
<h3 class="anchored" data-anchor-id="what-is-a-relational-database-management-system-rdbms">What is a Relational Database Management System (RDBMS)?</h3>
<p>A relational database management system (RDBMS) is a program that allows you to create, update, and administer a relational database. Most relational database management systems use the SQL language to access the database.</p>
</section>
<section id="what-is-sql" class="level2">
<h2 class="anchored" data-anchor-id="what-is-sql">What is SQL?</h2>
<p>SQL (Structured Query Language) is a <a href="https://www.codecademy.com/resources/blog/programming-languages/">programming language</a> used to communicate with data stored in a relational database management system. SQL syntax is similar to the English language, which makes it relatively easy to write, read, and interpret.</p>
<p>Many RDBMSs use SQL (and variations of SQL) to access the data in tables. For example, SQLite is a relational database management system. SQLite contains a minimal set of SQL commands (which are the same across all RDBMSs). Other RDBMSs may use other variants.</p>
<p>(SQL is often pronounced in one of two ways. You can pronounce it by speaking each letter individually like “S-Q-L”, or pronounce it using the word “sequel”.)</p>
<section id="popular-relational-database-management-systems" class="level3">
<h3 class="anchored" data-anchor-id="popular-relational-database-management-systems">Popular Relational Database Management Systems</h3>
<p>SQL syntax may differ slightly depending on which RDBMS you are using. Here is a brief description of popular RDBMSs:</p>
<p><a href="https://www.mysql.com/">MySQL</a></p>
<p>MySQL is the most popular open source SQL database. It is typically used for web application development, and often accessed using PHP.</p>
<p>The main advantages of MySQL are that it is easy to use, inexpensive, reliable (has been around since 1995), and has a large community of developers who can help answer questions.</p>
<p>Some of the disadvantages are that it has been known to suffer from poor performance when scaling, open source development has lagged since Oracle has taken control of MySQL, and it does not include some advanced features that developers may be used to.</p>
<p><a href="https://www.postgresql.org/">PostgreSQL</a></p>
<p>PostgreSQL is an open source SQL database that is not controlled by any corporation. It is typically used for web application development.</p>
<p>PostgreSQL shares many of the same advantages of MySQL. It is easy to use, inexpensive, reliable and has a large community of developers. It also provides some additional features such as foreign key support without requiring complex configuration.</p>
<p>The main disadvantage of PostgreSQL is that it can be slower in performance than other databases such as MySQL. It is also slightly less popular than MySQL.</p>
<p>For more information about PostgreSQL including installation instructions, read <a href="https://www.codecademy.com/paths/design-databases-with-postgresql/tracks/what-is-a-database/modules/using-postgresql-on-your-own-computer/articles/installing-and-using-postgresql-locally">this article</a>.</p>
<p><a href="https://www.oracle.com/database/">Oracle DB</a></p>
<p>Oracle Corporation owns Oracle Database, and the code is not open sourced.</p>
<p>Oracle DB is for large applications, particularly in the banking industry. Most of the world’s top banks run Oracle applications because Oracle offers a powerful combination of technology and comprehensive, pre-integrated business applications, including essential functionality built specifically for banks.</p>
<p>The main disadvantage of using Oracle is that it is not free to use like its open source competitors and can be quite expensive.</p>
<p><a href="https://www.microsoft.com/en-us/sql-server/sql-server-2017">SQL Server</a></p>
<p>Microsoft owns SQL Server. Like Oracle DB, the code is close sourced.</p>
<p>Large enterprise applications mostly use SQL Server.</p>
<p>Microsoft offers a free entry-level version called Express but can become very expensive as you scale your application.</p>
<p><a href="https://www.sqlite.org/">SQLite</a></p>
<p>SQLite is a popular open source SQL database. It can store an entire database in a single file. One of the most significant advantages this provides is that all of the data can be stored locally without having to connect your database to a server.</p>
<p>SQLite is a popular choice for databases in cellphones, PDAs, MP3 players, set-top boxes, and other electronic gadgets. The SQL courses on Codecademy use SQLite.</p>
<p>For more info on SQLite, including installation instructions, read this article.</p>
</section>
<section id="using-an-rdbms-on-codecademy" class="level3">
<h3 class="anchored" data-anchor-id="using-an-rdbms-on-codecademy">Using An RDBMS On Codecademy</h3>
<p>On Codecademy, we use both SQLite and PostgreSQL. While this may sound confusing, don’t worry! We want to stress that the basic syntax you will learn can be used in both systems. For example, the syntax to create tables, insert data into those tables, and retrieve data from those tables are all identical. That’s one of the nice parts of learning SQL — by learning the fundamentals with one RDBMS, you can easily begin work in another.</p>
<p>That being said, let’s take a look at some of the more subtle details:</p>
<ul>
<li><p><em>File extensions</em> — when working with databases on Codecademy, take a look at the name of the file you’re writing in. If your file ends in .sqlite, you’re using a SQLite database. If your file ends in .sql, you’re working with PostgreSQL.</p></li>
<li><p><em>Data types</em> — You’ll learn about data types very early into learning a RDBMS. One thing to note is that SQLite and PostgreSQL have slightly different data types. For example, if you want to store text in a SQLite database, you’ll use the TEXT data type. If you’re working with PostgreSQL, you have many more options. You could use varchar(n), char(n), or text. Each type has its own subtle differences. This is a good example of PostgreSQL being slightly more robust than SQLite, but the core concepts remaining the same.</p></li>
<li><p><em>Built-in tables</em> — As you work your way through more complicated lessons on databases, you’ll start to learn how to access built-in tables. For example, if you take our lesson on indexes, you’ll learn how to look at the table that the system automatically creates to keep track of what indexes exist. Depending on which RDBMS system you are using (in that lesson we’re using PostgreSQL), the syntax for doing that will be different. Any time you’re writing SQL about the database itself, rather than the data, that syntax will likely be unique to the RDBMS you’re using.</p></li>
</ul>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>Relational databases store data in tables. Tables can grow large and have a multitude of columns and records. Relational database management systems (RDBMSs) use SQL (and variants of SQL) to manage the data in these large tables. The RDBMS you use is your choice and depends on the complexity of your application.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>